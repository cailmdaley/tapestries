versions: [
  "SP_v1.4.5", "SP_v1.4.5_leak_corr",
  "SP_v1.4.6.3", "SP_v1.4.6.3_leak_corr",
  "SP_v1.4.6_ecut07", "SP_v1.4.6_ecut07_leak_corr",
  "SP_v1.4.8", "SP_v1.4.8_leak_corr",
  "SP_v1.4.11.3", "SP_v1.4.11.3_leak_corr",
  "SP_v1.4.11.3_ecut07", "SP_v1.4.11.3_ecut07_leak_corr"
]
# IV weight variants removed — one-off test (see fiber v1-4-11-2-iv-weights-harmonic-b-2a2ed88b)
ellipticity_suffix: "_leak_corrected"

# grid search parameters
npatches: [120]

min_seps: [1]
max_seps: [250]
nbins: [20]

min_seps_int : [0.1]
max_seps_int: [500]
nbins_int: [100, 200, 300, 500]

# fiducial parameters
fiducial:
  version: SP_v1.4.6.3_leak_corr
  blind: A
  npatch: 1
  min_sep: 1.0
  max_sep: 250.0
  nbins: 20

  mock_version: SP_v1.4.6.3

  min_sep_int: 0.5
  max_sep_int: 300.0
  nbins_int: 1000

  # COSEBIS parameters
  # Compute 20 modes, evaluate PTEs for both 6 and 20
  nmodes: 20
  
  # Unified fiducial scale cut for all B-mode analyses (arcmin)
  # Matches Paper II (Goh et al.): [12, 83] for both xi+ and xi-
  # COSEBIs use unified cuts since they cannot have separate xi+/xi- ranges
  fiducial_min_scale: 12
  fiducial_max_scale: 83

  # Pure E/B mode fiducial scale cuts for plots (arcmin)
  # From Paper II: [12, 83] for both (most conservative choice)
  fiducial_xip_scale_cut: [12, 83]
  fiducial_xim_scale_cut: [12, 83]

  chain: SP_v1.4.6.3_leak_corr_C_sc_10_150_new_ia


var_method: jackknife

# covariance settings for semi-analytical E/B mode covariance
covariance:
  # Use masked covariance by default when true
  default_masked: true
  # Enable semi-analytical covariance propagation
  use_semianalytic: true
  # Number of Monte Carlo samples for covariance propagation (used by pure E/B mode analysis)
  n_samples: 2000
  # Cosmology: imported from sp_validation.cosmology.PLANCK18 (astropy Planck18)
  # Mask Cl paths: defined in covariance.smk (MASK_CLS_FILES)

# Harmonic-space (C_l) analysis parameters
cl:
  n_ell_bins: 32
  # Finer binning for COSEBIS cross-validation (harmonic_config_cosebis_comparison).
  # 96-bin powspace recovers modes 1-5 within ~2% of config-space (validated on GLASS mocks).
  # Modes 6+ remain fundamentally limited by W_n(ell) numerical precision, not binning.
  cosebis_nbins: 96
  # Fiducial scale cuts for cosmological inference (from Paper II, Goh et al.)
  fiducial_ell_min: 300
  fiducial_ell_max: 1600

# COSEBIS calculation parameters
cosebis:
  theta_min: 1.0      # arcmin, angular scale range
  theta_max: 250.0    # arcmin, matches max_sep for consistency
  mode_subsets: [6, 20]  # mode counts for PTE evaluation

# Statistical thresholds
statistics:
  pte_healthy_range: [0.05, 0.95]  # 2σ equivalent bounds

# Plotting defaults
plotting:
  palette: "colorblind"  # seaborn palette
  version_alpha:
    fiducial: 1.0
    comparison: 1.0
  markers:
    style: "unfilled"
    linewidth: 1.5
    capsize: 3
  x_offsets: [-0.132, -0.044, 0.044, 0.132]  # prevent overlap in comparisons (4 versions), tighter spacing
  # Human-readable version labels for plots
  version_labels:
    SP_v1.4.5_leak_corr: "Initial"
    SP_v1.4.6.3_leak_corr: "Size cuts"
    SP_v1.4.8_leak_corr: "Masking"
    SP_v1.4.11.3_leak_corr: "Relaxed flags"
  # Which version's value is drawn as the fiducial reference line in version comparison plots
  fiducial_for_comparison: "SP_v1.4.6.3_leak_corr"
  # Version box styling
  version_box:
    edge_color: "0.3"
    edge_linewidth: 0.7
    fiducial_line_color: "black"
    fiducial_line_width: 1.0

# Pure E/B mode analysis
pure_eb:
  # Number of parallel chunks for MC covariance estimation
  n_chunks: 20

# pixel mask processing for survey geometry and CosmoCov integration
pixel_mask:
  # Target nside values for downgrading (balance accuracy vs computational cost)
  target_nsides: [2048, 4096, 8192]
  # Source mask file for downgrading
  source_file: "/n17data/UNIONS/WL/masks/mask_r_nside131072.hsp"

# GLASS mock covariance computation
glass_mocks:
  version: "v0"
  seed_range: [1, 350]

# External tools
tools:
  cosmocov_executable: "/n23data1/n06data/lgoh/scratch/UNIONS/CosmoCov/covs/cov"

# Ellipticity cut investigation
ecut:
  versions_for_comparison:
    - SP_v1.4.6.3_leak_corr
    - SP_v1.4.6_ecut07_leak_corr
    - SP_v1.4.11.3_leak_corr
    - SP_v1.4.11.3_ecut07_leak_corr
  version_labels:
    SP_v1.4.6.3_leak_corr: "v1.4.6.3"
    SP_v1.4.6_ecut07_leak_corr: "v1.4.6 $|e|<0.7$"
    SP_v1.4.11.3_leak_corr: "v1.4.11.3"
    SP_v1.4.11.3_ecut07_leak_corr: "v1.4.11.3 $|e|<0.7$"
  fiducial_for_comparison: "SP_v1.4.6.3_leak_corr"
